<html>
    <body>
      <script>
      "use strict";
      function submitForm(oFormElement, divTag)
      {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById(divTag).innerHTML =
          this.responseText;
        }
        };
        
        xhr.onerror = function(){ document.getElementById(divTag).innerHTML = "Error."; console.log(this.responseText);} // failure case
        xhr.open (oFormElement.method, oFormElement.action, true);
        xhr.send (new FormData (oFormElement));
        document.getElementById(divTag).innerHTML = "Loading...";
        return false;
      }
      </script> 

        <h2>Create Redirect</h2>
        
        <form action="/add" method="POST" onsubmit="return submitForm(this, 'shortenedResult');">
          Redirect Key (https://anoni.sh/{key}):<br>
          <input type="text" autocorrect="off" autocapitalize="none" name="key" value="" placeholder="Enter a key">
          <br>
          Redirect To:<br>
          <input type="text" autocorrect="off" autocapitalize="none" name="to" value="" placeholder="Enter a URL to redirect to">
          <br><br>
          <input type="submit" value="Submit">
        </form> 
        <h4>Shortened URL</h4>
        <div id="shortenedResult">
      </div>
        <br><br>

        <h2>Check Shortened URL</h2>

        <form action="/checkRedirect" method="POST" onsubmit="return submitForm(this, 'redirectURL');">
          Shortened URL:<br>
          <input type="text" autocorrect="off" autocapitalize="none" name="key" value="" placeholder="Enter a shortened URL">
          <br><br>
          <input type="submit" value="Submit">
        </form> 
        <h4>Redirected URL</h4>
          <div id="redirectURL">
        </div>

        <br><br><br>
        We include absolutely no logging, and unlike traditional URL shorteners written in PHP we aren't running Apache/NGINX which store access logs by default. Full source code is available on our <a href="https://github.com/AmIJesse/Anonish-URL-shortener">github</a>.
        <br>
        Brought to you by <a href="https://twitter.com/theinsecurenet">Internet Of Insecurity</a>    
        </body>


</html>